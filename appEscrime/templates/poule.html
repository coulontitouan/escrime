{% extends 'base.html' %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{url_for('static', filename='poule.css')}}">
{% endblock %}
{% block content %}
<div class="titre">
    <h1>Poule A</h1>
    <div class="status">
        <svg width="100" height="15" id="codeCouleur">
            <circle cx="7.5" cy="7.5" r="3.75" fill="orange"/>
            <text x="25" y="7.5" dominant-baseline="middle">A Venir</text>
        </svg>
        <svg width="100" height="15" id="codeCouleur">
            <circle cx="7.5" cy="7.5" r="3.75" fill="green"/>
            <text x="25" y="7.5" dominant-baseline="middle">En cours</text>
        </svg>
        <svg width="100" height="15" id="codeCouleur">
            <circle cx="7.5" cy="7.5" r="3.75" fill="cornflowerblue"/>
            <text x="25" y="7.5" dominant-baseline="middle">Terminé</text>
        </svg>
    </div>
</div>
<div id="gros">
    {% for match in poule.matchs %}
        {% if match.etat != "Termine" %}
        {% if current_user.is_arbitre(competition.id)%}
            <a href="{{url_for('affiche_match', id_compet = competition.id , id_poule = poule.id, id_match = match.id)}}">
        {% endif %}
            {% if match.etat == "En cours" %}
                <div class="petit encours">
            {% else %}
                <div class="petit avenir">
            {% endif %}
        {% else %}
            <div class="petit termine">
        {% endif %}
                <div class="head">
                    <p>Piste {{ match.piste }}</p>
                </div>
                <div>
                    {% with tireurs = match.get_tireurs_match(poule.id) %}
                    {% with tireur1 = tireurs[0].get_escrimeur() %}
                    <p>{{ tireur1.nom }} {{ tireur1.prenom }} ( {{ tireur1.get_classement(competition.id_arme, competition.id_categorie).points }} pts )</p>
                    {% endwith %}
                    {% if match.etat == "Termine" %}
                        <p>{{ match.participations[0].touches }} - {{ match.participations[1].touches }}</p>
                    {% endif %}
                    {% with tireur2 = tireurs[1].get_escrimeur() %}
                    <p>( {{ tireur2.get_classement(competition.id_arme, competition.id_categorie).points }} pts ) {{ tireur2.nom }} {{ tireur2.prenom }}</p>
                    {% endwith %}
                    {% endwith %}
                </div>
                <div class="foot">
                    <p>Arbitré par {{ match.get_arbitre().prenom }}  {{ match.get_arbitre().nom }}</p>
                </div>
            </div>
        {% if match.etat != "Termine" %}
        </a>
        {% endif %}
    {% endfor %}
</div>
{% endblock %}